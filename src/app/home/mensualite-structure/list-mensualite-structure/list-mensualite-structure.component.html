<!-- entete -->
    <div class=" card p-3 position-sticky top-0 z-1">
    <div class="d-flex align-items-center justify-content-between mb-1">
      <div class="fs-4 fw-bold">
        MensualiteStructures {{list.length==les_mensualite_structures.length?list.length:list.length + "/" + les_mensualite_structures.length}}
      </div>
      <div class="d-flex">
        <button class="btn btn-primary" (click)="openModal_add_mensualite_structure()"><i class="bi bi-plus-square-dotted"></i> MensualiteStructure</button>
      </div>
    </div>
    <div class="d-flex gap-1 justify-content-end">
      <ng-select [multiple]="true" [closeOnSelect]="false" placeholder="Rechercher ici ..." notFoundText="Aucun résultat" class="no-limit" [(ngModel)]="filter.text" (search)="filter_change($event)" (change)="filter_change()"
        style="min-width: 400px;">
        <!-- <ng-option disabled>Zones</ng-option>
        @for (let zone of donnees_select.zone) {
          <ng-option [value]="'zone_'+zone.id_zone">
            {{ zone.nom }}
          </ng-option>
        }

        <ng-option disabled>Domaines</ng-option>
        @for (let domaine of donnees_select.domaine) {
          <ng-option [value]="'domaine_'+domaine.id_domaine">
            {{ domaine.nom }}
          </ng-option>
        }-->
      </ng-select>
    </div>
  </div>
  <br>
  
<!-- LISTE EN CARTES -->
<div *ngIf="!loading_get_mensualite_structure && list.length" class="row g-3">
  <div class="col-12 col-md-6 col-xl-4" *ngFor="let m of list; trackBy: trackById">
   <div class="card shadow-sm hover-card h-100 mensualite-card">
  <div class="card-header border-0 pb-0 bg-white">
    <div class="d-flex justify-content-between align-items-start">
      <div class="d-flex align-items-center gap-2">
        <div class="icon-square bg-primary-subtle text-primary">
          <i class="bi bi-cash-coin fs-5"></i>
        </div>
        <div>
          <div class="fw-bold text-truncate" title="{{ m.libelle_mensualite }}">
            {{ m.libelle_mensualite || 'Sans libellé' }}
          </div>
         
        </div>
      </div>
      
      </div>
  </div>

  <div class="card-body pt-2 pb-2">
    <div class="text-end">
      <div class="fw-bolder display-6 text-dark" title="Montant total">
        {{ api.formatMontant(m.montant_total, 0) }}
      </div>
      <span class="text-muted small fw-semibold">FCFA</span>
    </div>
  </div>

  <div class="card-footer bg-light-subtle d-flex justify-content-between align-items-center border-0 pt-2 pb-2">
    <div class="text-muted small text-truncate me-2" title="{{ m.description_mensualite }}">
      {{ m.description_mensualite || 'Description non disponible' }}
    </div>
    <div class="d-flex gap-2 flex-shrink-0">
      <button type="button" class="btn btn-primary-subtle btn-sm p-1"
              (click)="openModal_edit_mensualite_structure(m)" title="Modifier">
        <i class="bi bi-pencil-square"></i>
      </button>
      <button type="button" class="btn btn-danger-subtle btn-sm p-1"
              (click)="delete_mensualite_structure(m)" title="Supprimer">
        <i class="bi bi-trash"></i>
      </button>
    </div>
  </div>
</div>
  </div>
</div>

<!-- états vides / chargement identiques à avant -->
<div *ngIf="!loading_get_mensualite_structure && !list.length" class="text-center text-secondary py-5">
  <i class="bi bi-inbox fs-1 d-block mb-2"></i>
  Aucune mensualité trouvée.
</div>
