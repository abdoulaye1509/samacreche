<div class="modal-header">
  <h1 class="modal-title fs-5">Ajouter un parent</h1>
  <button type="button" class="btn-close" aria-label="Close" (click)="activeModal.close()"></button>
</div>

<form [formGroup]="reactiveForm_add_parent" (ngSubmit)="onSubmit_add_parent()">
  <div class="modal-body">

    <!-- Section : Identité -->
    <h6 class="section-title"><i class="bi bi-person-badge me-1"></i> Identité</h6>
    <div class="row g-3">
      <div class="col-sm-6">
        <label class="form-label">Prénom</label>
        <input class="form-control" placeholder="Prénom" formControlName="prenom_parent"
               [ngClass]="{'is-invalid': submitted && f['prenom_parent'].errors}">
        <div class="invalid-feedback" *ngIf="submitted && f['prenom_parent'].errors">Champ obligatoire</div>
      </div>

      <div class="col-sm-6">
        <label class="form-label">Nom</label>
        <input class="form-control" placeholder="Nom" formControlName="nom_parent"
               [ngClass]="{'is-invalid': submitted && f['nom_parent'].errors}">
        <div class="invalid-feedback" *ngIf="submitted && f['nom_parent'].errors">Champ obligatoire</div>
      </div>

      <div class="col-sm-6" *ngIf="form_details?.liens_parente?.length">
        <label class="form-label">Lien de parenté</label>
        <ng-select formControlName="id_lien_parente"
                   [items]="form_details.liens_parente"
                   bindLabel="libelle"
                   bindValue="id_lien_parente"
                   placeholder="Sélectionner…">
        </ng-select>
      </div>
    </div>

    <hr class="my-3">

    <!-- Section : Coordonnées -->
    <h6 class="section-title"><i class="bi bi-geo me-1"></i> Coordonnées</h6>
    <div class="row g-3">
      <div class="col-sm-6">
        <label class="form-label">Téléphone</label>
        <input class="form-control" type="tel" placeholder="Téléphone" formControlName="telephone_parent"
               autocomplete="tel"
               [ngClass]="{'is-invalid': submitted && f['telephone_parent'].errors}">
        <div class="invalid-feedback" *ngIf="submitted && f['telephone_parent'].errors">Champ obligatoire</div>
      </div>

      <div class="col-sm-6">
        <label class="form-label">Email</label>
        <input class="form-control" type="email" placeholder="Email" formControlName="email_parent"
               autocomplete="email"
               [ngClass]="{'is-invalid': submitted && f['email_parent'].errors}">
        <div class="invalid-feedback" *ngIf="submitted && f['email_parent'].errors">
          {{ f['email_parent'].errors?.['required'] ? 'Champ obligatoire' : 'Email invalide' }}
        </div>
      </div>

      <div class="col-12">
        <label class="form-label">Adresse</label>
        <input class="form-control" placeholder="Adresse" formControlName="adresse_parent" autocomplete="street-address">
      </div>
    </div>

    <hr class="my-3">

    <!-- Section : Sécurité & Documents -->
    <h6 class="section-title"><i class="bi bi-shield-lock me-1"></i> Sécurité & Documents</h6>
    <div class="row g-3">
      <div class="col-sm-6">
        <label class="form-label">Mot de passe</label>
        <input class="form-control" type="password" placeholder="Mot de passe" formControlName="mot_de_passe" autocomplete="new-password">
      </div>

      <div class="col-sm-6">
        <label class="form-label">CNI</label>
        <input class="form-control" placeholder="Numéro CNI" formControlName="cni" autocomplete="off">
      </div>
    </div>

  </div>

  <div class="modal-footer">
    <button class="btn btn-primary" type="submit"
            [disabled]="loading_add_parent || loading_get_details_add_parent_form">
      {{ loading_add_parent ? 'En cours…' : 'Valider' }}
    </button>
    <button type="button" class="btn btn-outline-danger" (click)="activeModal.close()">Fermer</button>
  </div>
</form>
